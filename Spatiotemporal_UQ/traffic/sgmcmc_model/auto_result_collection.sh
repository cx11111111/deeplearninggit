#!/bin/bash
# The following code repeat for 10 times. 
# This will copy the results generated by the last 10 saved model to the desired folder. 

# For example, if we train for 250 epochs, the following code will copy 
# the results (dcrnn_predictions.npz) inferenced by model_param_240.npz to model_param_249.npz

# We can view this as the last ten samples generated from the Markov chain. 

# Of course we can copy the following code a few more times (or write it into for loop) to obtain more samples. Feel free to adapt this file to your code. 

python3 run_demo_pytorch.py --config_filename=data/model/pretrained/METR-LA/config.yaml --loading_epoch=`ls -1 ./models | sort -n -k1.4 | tail -1`
mv data/dcrnn_predictions.npz ../CI_plotting/data/gau_prior_gau1.5_init/`ls ../CI_plotting/data/gau_prior_gau1.5_init/*.npz | wc -l`.npz
rm models/`ls -1 ./models | sort -n -k1.4 | tail -1`

python3 run_demo_pytorch.py --config_filename=data/model/pretrained/METR-LA/config.yaml --loading_epoch=`ls -1 ./models | sort -n -k1.4 | tail -1`
mv data/dcrnn_predictions.npz ../CI_plotting/data/gau_prior_gau1.5_init/`ls ../CI_plotting/data/gau_prior_gau1.5_init/*.npz | wc -l`.npz
rm models/`ls -1 ./models | sort -n -k1.4 | tail -1`

python3 run_demo_pytorch.py --config_filename=data/model/pretrained/METR-LA/config.yaml --loading_epoch=`ls -1 ./models | sort -n -k1.4 | tail -1`
mv data/dcrnn_predictions.npz ../CI_plotting/data/gau_prior_gau1.5_init/`ls ../CI_plotting/data/gau_prior_gau1.5_init/*.npz | wc -l`.npz
rm models/`ls -1 ./models | sort -n -k1.4 | tail -1`

python3 run_demo_pytorch.py --config_filename=data/model/pretrained/METR-LA/config.yaml --loading_epoch=`ls -1 ./models | sort -n -k1.4 | tail -1`
mv data/dcrnn_predictions.npz ../CI_plotting/data/gau_prior_gau1.5_init/`ls ../CI_plotting/data/gau_prior_gau1.5_init/*.npz | wc -l`.npz
rm models/`ls -1 ./models | sort -n -k1.4 | tail -1`

python3 run_demo_pytorch.py --config_filename=data/model/pretrained/METR-LA/config.yaml --loading_epoch=`ls -1 ./models | sort -n -k1.4 | tail -1`
mv data/dcrnn_predictions.npz ../CI_plotting/data/gau_prior_gau1.5_init/`ls ../CI_plotting/data/gau_prior_gau1.5_init/*.npz | wc -l`.npz
rm models/`ls -1 ./models | sort -n -k1.4 | tail -1`

python3 run_demo_pytorch.py --config_filename=data/model/pretrained/METR-LA/config.yaml --loading_epoch=`ls -1 ./models | sort -n -k1.4 | tail -1`
mv data/dcrnn_predictions.npz ../CI_plotting/data/gau_prior_gau1.5_init/`ls ../CI_plotting/data/gau_prior_gau1.5_init/*.npz | wc -l`.npz
rm models/`ls -1 ./models | sort -n -k1.4 | tail -1`

python3 run_demo_pytorch.py --config_filename=data/model/pretrained/METR-LA/config.yaml --loading_epoch=`ls -1 ./models | sort -n -k1.4 | tail -1`
mv data/dcrnn_predictions.npz ../CI_plotting/data/gau_prior_gau1.5_init/`ls ../CI_plotting/data/gau_prior_gau1.5_init/*.npz | wc -l`.npz
rm models/`ls -1 ./models | sort -n -k1.4 | tail -1`

python3 run_demo_pytorch.py --config_filename=data/model/pretrained/METR-LA/config.yaml --loading_epoch=`ls -1 ./models | sort -n -k1.4 | tail -1`
mv data/dcrnn_predictions.npz ../CI_plotting/data/gau_prior_gau1.5_init/`ls ../CI_plotting/data/gau_prior_gau1.5_init/*.npz | wc -l`.npz
rm models/`ls -1 ./models | sort -n -k1.4 | tail -1`

python3 run_demo_pytorch.py --config_filename=data/model/pretrained/METR-LA/config.yaml --loading_epoch=`ls -1 ./models | sort -n -k1.4 | tail -1`
mv data/dcrnn_predictions.npz ../CI_plotting/data/gau_prior_gau1.5_init/`ls ../CI_plotting/data/gau_prior_gau1.5_init/*.npz | wc -l`.npz
rm models/`ls -1 ./models | sort -n -k1.4 | tail -1`

python3 run_demo_pytorch.py --config_filename=data/model/pretrained/METR-LA/config.yaml --loading_epoch=`ls -1 ./models | sort -n -k1.4 | tail -1`
mv data/dcrnn_predictions.npz ../CI_plotting/data/gau_prior_gau1.5_init/`ls ../CI_plotting/data/gau_prior_gau1.5_init/*.npz | wc -l`.npz
rm models/`ls -1 ./models | sort -n -k1.4 | tail -1`


